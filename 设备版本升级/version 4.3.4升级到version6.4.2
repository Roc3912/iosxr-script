一、注意事项
1、version4.3.4升级到version6.4.2属于大版本升级，升级的时候需要有一个中间版本进行过渡（version 5.3.2及以上版本）

2、32-bit IOS XR Corrupt Pie File (SWIMS)
Affected Releases
•	Pre-5.3.2 does not contain the SWIMS signing and only supports Abraxas or the legacy Code Signing Server (CSS) software which is now completly deprecated
•	5.3.2 to 6.3.1 support both Abraxas and SWIMS
•	6.3.2 and above supports only SWIMS signing
•	Some latest SMU created after Abraxas server decommission (after 5.3.4 SP9) are also signed with SWIMS only.
Since 5.3.1 and prior releases supports only Abraxas (after Oct 17 2015) and 6.3.2 and above supports only SWIMS signing, routers cannot be upgraded from one to the other.
If you are running 5.3.1 or prior then you must upgrade to 5.3.2-6.3.1 first and then to 6.3.2 or higher.
Examples
Question: I am running 5.3.1 and wish to upgrade to 6.4.2. Will this work?
Answer: No, you must first upgrade to an intermediary release that supports SWIMS.
Question: I am running 5.3.4 and wish to upgrade to 6.4.2. Will this work?
Answer: Yes, as 5.3.4 supports both Abraxas and SWIMS.
Question: I am running 5.3.1 and wish to upgrade to 5.3.4 plus latest SMU. Will this work?
Answer: Upgrade to 5.3.4 first and then installing SMU on top will work. However activating both 5.3.4 + latest SMU at once will fail as 5.3.1 won't understand SMU signage.
version4.3.4证书文件已经上传！

3、 Cisco IOS-XR 5.3.0 及更早版本的 ASR9000、CRS 和 XR12000 - 2015 年 10 月 17 日 SW 证书到期（从5.3.X升级到6.x.x会出现）
Symptom:
When trying to install or add a SMU/PIE post October 17 2015, you will run into the below error due to the expiration of the CSS certificate on Oct 17, 2015.
Error: Cannot proceed with the add operation because the code signing
Error: certificate has expired.
Error: Suggested steps to resolve this:
Error: - check the system clock using 'show clock' (correct with 'clock set' if necessary).
Error: - check the pie file was built within the last 5 years using '(admin) show install pie-info
Error: /tftp://202.153.144.25/auto/tftp-sjc-users3/jamohamm/IMAGES/asr9k-mcast-px.pie-4.3.2'.
Post this expiration date, provided no new image, SMU or pie installs are required, existing customer installations will continue to operate as expected even if the customer reboots a presently installed image with existing SMUs.


二、安装前的准备
1、配置console口
line console 
 exec-timeout 0 0
 stopbits 1
!
2、配置FPD自动升级
router(admin-config)#fpd auto-upgrade   
router(admin-config)#commit
！
或者是选择手动升级  router(admin-config)upgrado hw-modulo fpd all location all   
注：
FPD在升级过程中如果编程失败，可能会导致硬件需要RMA

3、Cost-out IGP：为了尽量减少升级过程中的流量损失，请按照以下步骤操作：
确保所有流经路由器的流量都需要升级有一条备用路径。 在这种情况下，可以采取其中之一冗余路由器停止服务，升级它，然后重新投入使用没有任何重大的流量损失（这应该适用于核心路由器，对于边缘设备通常冗余路径可能不可用）
 将 IGP 指标设置为可能的最高值，以便 IGP 尝试路由流量通过备用路径。
For OSPF use “max-metric” command. router(config-ospf)# max-metric router-lsa
For ISIS use “spf-overload-bit” command. router(config-isis)# set-overload-bit

4、将业务板卡进行卸载（升级过程中会重启多次）

